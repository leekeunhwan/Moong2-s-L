# 네트워크 공부 정리

### 네트워크란?

두 대 이상의 컴퓨터들을 연결하여, 정보를 교환하고 자원을 공유하는 것을 의미한다.<br>

---

### 네트워크 크기에 따른 분류

(크기가 작은 순부터)

1. PAN (Personal Area Network) : 개인적인 네트워크 (가장 작은 네트워크) => BlueTooth
2. LAN (Local Area Network) : 근거리 영역 네트워크 => PC방
3. MAN (Metropolitan Area Network) : 대도시 영역 네트워크 (중규모 영역 네트워크) => 지역 케이블
4. WAN (Wide Area Network) : 광대역 네트워크

---

## 프로토콜

컴퓨터끼리 또는 컴퓨터와 단말기 사이 등에서 정보 교환이 필요한 경우,<br>
이를 원할하게 하기 위하여 정한 여러 가지 통신규칙과 방법에 대한 약속<br>
(짧게 말하면 통신의 규약을 의미한다.)<br>

---

### 네트워크의 두 주소

1. IP 주소

네트워크상에서 특정 개체를 나타낼 수 있는 논리적 주소<br>
IP 주소(192.168.0.1) = 네트워크 주소(192.168.0) + 호스트 주소(1)<br>
192.168.0 대역에 있으면 서로 통신이 가능함, 호스트 주소는 주인을 알 수 있는 호스트 인덱스<br>

<br>

2. MAC 주소

네트워크 상에서 특정 개체를 나타내는 물리적 주소<br>
MAC 주소(00:60:97:8F:4F:86) = 제조사번호(00:60:97) + 특정주소(8F:4F:86)<br>
제조사번호는 네트워크카드를 만드는 제조사마다 부여가 되어 있으며, 특정주소는 각 제조사가 주는 고유한 번호이다.<br>

---

### 네트워크 주소관련 프로토콜

1. ARP (Address Resolution Protocol)

   - IP 주소를 MAC 주소로 바꾸는 프로토콜

<br>

2. RARP (Reverse Address Resolution Protocol)

   - MAC 주소를 IP 주소로 바꾸는 프로토콜

---

### 스위치 (허브)

스위치 (허브) : 네트워크 단위들을 연결하는 통신 장비

<br>

#### 스위치와 허브의 차이점

스위치는 1:N통신을 할 수 있고, 속도와 처리량도 허브에 비해 월등하다.<br>
허브는 스위치와 유사하지만, 허브는 1:1통신을 하며, 가격은 스위치보다 싸지만 속도와 처리량이 떨어진다.<br>

<br>

#### 스위치의 5가지 작업

1. Learning : 테이블에 (호스트의)정보를 저장한다. (관리 목적)
2. Flooding : (호스트 정보가 없거나 모를때) 모르는 정보를 모든 호스트에 뿌린다.
3. Forwording : (호스트의 정보를 알고 있을 때) 알고있는 목적지에 정보를 전달한다.
4. Filtering : (A => A의 경우, B로 못넘어 가도록 함) 다른 목적지로 넘어가지 못하게 한다.
5. Aging : (저장을 무제한으로 할 순 없기에, 나중에 덮어쓰거나 지우거나 함) 오래된 정보를 지운다.

---

### 라우터

모든 패킷들은 목적지를 갈 때 라우터를 거쳐서 지나가게 된다.<br>
패킷의 위치를 추출하여, 그 위치에 대한 최상의 경로를 지정하여,<br>
이 경로를 따라 데이터 패킷을 다음 장치로 전향시키는 장비<br>
최적의 경로를 배정하는 일을 한다.<br>

<br>

#### 라우팅 알고리즘

라우터가 가장 빠르고 안전한 길을 설정을 한다.<br>
이 때, 라우터와 라우터 사이에 가중치를 두게 된다.<br>
가중치가 가장 짧은 길로 가게되면, 가장 빠른 길이기 떄문에,<br>
라우터는 가장 빠른 길로 라우팅을 한다.<br>

<br>

---

### 논리 네트워크

(라우터나 방화벽을 넘냐 안넘냐에 따라 내부, 외부가 정해진다.)

<br>

#### 내부 네트워크

로컬 네트워크개념으로 라우터나 방화벽 안쪽에 자리한 네트워크로 라우터를 넘어가지 않는 이상<br>
내부에 있는 호스트끼리만 통신이 가능한 네트워크이다.<br>

<br>

#### 외부 네트워크

라우터나 방화벽 넘어 밖에 위치한 네트워크로 외부 네트워크로 나감으로써 인터넷이 만들어진다.<br>

---

### 유니캐스트 (1:1 통신)

- 고유 주소로 식별된 하나의 네트워크 목적지에 메시지를 전송하는 방식<br>
- 네트워크에서 가장많이 사용되는 트래픽<br>
- 랜 통신에서 송신자의 맥주소와 수신자의 맥주소를 알고 있을 때<br>
  해당 데이터를 정확히 목적지에 전달하는 방법 -> 1:1 통신<br>

---

### 브로드캐스트

같은 네트워크에서 모든 호스트에게 데이터를 전달하는 방식<br>
(TV방송같은 개념, 송신자는 알고 있는데, 수신자를 모를 때 사용한다.)<br>

---

### 멀티캐스트

- 한 번의 송신으로 메시지를 여러 컴퓨터에 동시에 전송하는 방식
- 유니캐스트와 브로드캐스트를 이용한 방식으로 그룹을 지어 해당 그룹에 데이터를 보낸다.

---

### DNS

- Domain Name System의 약자
- 호스트의 도메인 이름을 호스트의 네트워크 주소로 바꾸거나 그 반대의 변환을 수행하는 시스템
- KT의 DNS 주소 (kns.kornet.net) <-> (168.126.63.1)

```sh
$ nslookup [IP_ADDRESS]

# Server:	210.220.163.82
# Address:	210.220.163.82#53

# Non-authoritative answer:
# 1.63.126.168.in-addr.arpa	name = kns.kornet.net.

$ nslookup [DNS_ADDRESS]


# Server:    210.220.163.82
# Address:   210.220.163.82#53

# Non-authoritative answer:
# Name:   kns.kornet.net
# Address: 168.126.63.1

```

---

### TCP/UDP

#### TCP (Transmission Control Protocol)

신뢰성 높은 연결형 프로토콜로 데이터의 손실이나 중복, 순서 반전에 대해<br>
자동으로 복구를 해주며, 송.수신간에 정확한 데이터 전송이 가능하다.<br>

- 연결형 서비스를 지원하는 전송계층 프로토콜
- 인터넷 환경에서 기본으로 사용
- 호스트간 신뢰성 있는 데이터 전달과 흐름제어 및 혼잡제어등을 제공하는 전송계층

`[특징]`

- 가상 회선 연결 방식, 연결형 서비스를 제공
- 높은 신뢰성 (Sequence Number, Ack Number를 통한 신뢰성 보장)
- 연결의 설정 (3-way handshaking)과 해제(4-way handshaking)
- 데이터 흐름 제어 (수신자 버퍼 오버플로우 방지) 및 혼잡 제어 (네트워크 내 패킷 수가 과도하게 증가하는 현상 방지)
- 전이중 (Full-Duplex), 점대점 (Point To Point) 서비스

`[소켓 통신 과정]`

- 서버 : 소켓을 생성, 주소 할당, 연결 요청 기다림, 요청에 대한 응답
- 클라이언트 : 소켓을 생성, 주소 할당, 연결 요청

`TCP는 UDP에 비해 속도는 느리지만, 안정성 면에서는 뛰어나다`

<br>

#### UDP (User Datagram Protocol)

간단하고, 가벼우며, 신뢰할 수 없는 비연결형 프로토콜로 별도의 연결이나<br>
제한없이 데이터를 빠르게 처리가 가능하다.<br>

- 비연결형 서비스를 지원하는 전송계층 프로토콜
- 사용자 데이터그램형 프로토콜
- 인터넷상에서 서로 정보를 주고받을 때 정보를 보낸다는 신호나 받는다는 신호 절차를 거치지 않고,<br>
  보내는 쪽에서 일방적으로 데이터를 전달하는 통신 프로토콜<br>
- 보내는 쪽에서는 받는 쪽이 데이터를 받았는지 받지 않았는지 확인할 수 없고, 또 확인할 필요도 없도록 만들어진 프로토콜

`[특징]`

- 비연결형 (port만 확인하여, 소켓을 식별하고 송수신)
- 패킷 오버헤드가 적어 네트워크 부하 감소
- 비 신뢰성
- 오류 검출 (헤더에 오류 검출 필드를 포함하여 무결성 검사)
- TCP의 handshaking 같은 연결 설정이 없다.
- DNS, NFS, SNMP, RIP 등 사용

`[소켓 통신 과정]`

- 서버 : 소켓을 생성, 주소 할당, 데이터를 송수신
- 클라이언트 : 소켓을 생성 후 데이터 수신

`UDP는 TCP와 달리 데이터의 수신에 대한 책임을 지지 않는다. 안정성 면에서는 떨어지지만, 속도는 빠르다.`

<br>

| 구분   | UDP                                    | TCP                                                    |
| ------ | -------------------------------------- | ------------------------------------------------------ |
| 신뢰성 | 신뢰성이 없음                          | 신뢰성이 있음                                          |
| 연결성 | 비연결성                               | 연결성                                                 |
| 재전송 | 재전송없음                             | 재전송있음                                             |
| 특징   | 신뢰할수 없지만 고속의 데이터 전송가능 | 흐름제어로 인하여 속도는 비교적느려도, 신뢰성있는 연결 |

---

### 3Way-Handshaking

- TCP의 신뢰성있는 연결을 위해 패킷을 3번 교환하여, 사용자를 검증하는 과정
- 사용자가 서버에 연결 요청을 하면서, SYN패킷을 보낸다.
- 서버는 받은 SYN패킷에 대한 응답으로, SYN + ACK 패킷을 보낸다.
- 사용자는 ACK 패킷으로 응답을 보낸다.

사용자 -> SYN 패킷 -> 서버 <br>
사용자 <- SYN 패킷 + ACK 패킷 <- 서버 <br>
사용자 -> ACK 패킷 -> 서버<br>

- 와이어 샤크 툴을 이용하여 네트워크 패킷을 캡쳐할 수 있다.

---

### IP란?

- TCP/IP 프로토콜을 사용하는 모든 네트워크 장비를 구분해주는 주소
- 32bit로 이루어짐 (00000000.00000000.00000000.00000000)
- ex) 192.168.0.1 (11000000.10101000.00000000.00000001)
- 1옥테트 === 8bit, 4옥테트 === 32bit

---

### IP 주소 배정

- 10대의 PC가 있는 환경에서 라우터에 IP를 배정하여 네트워크를 만들어보자
- 외부 네트워크와 연결된 시리얼 인터페이스
- 내부 네트워크와 연결된 이더넷 인터페이스
- 192.168.0.1 ~ 192.168.0.255

---

### IP 주소 구분

- IP 주소는 네트워크 주소와 호스트 주소로 이루어져있다.
- 네트워크 주소는 한 인터페이스의 제공된 주소이고, 호스트 주소는 해당 인터페이스에서 객체를 구분하는 주소
- ex) 192.168.0(네트워크 주소).1(호스트 주소) (11000000.10101000.00000000.00000001)

---

### IP 주소의 클래스

- IP 주소를 보고 네트워크와 호스트를 구분할 수 있는데 class로 구분을 한다.
- 범주 (1 ~ 255)
- A class (1 ~ 126)
  (00000000.00000000.00000000.00000000 ~ 01111111.11111111.11111111.11111111)
- B class (128 ~ 191)
  (10000000.00000000.00000000.00000000 ~ 10111111.11111111.11111111.11111111)
- C class (192 ~ 223)
  (11000000.00000000.00000000.00000000 ~ 11011111.11111111.11111111.11111111)
- D class (224 ~ 239) : 멀티 캐스트 용
  (11100000.00000000.00000000.00000000 ~ 11101111.11111111.11111111.11111111)
- E class (240 ~ 255) : 연구 용
  (11110000.00000000.00000000.00000000 ~ 11111111.11111111.11111111.11111111)

---

### OSI 7 Layer

- 업체마다 통신 규약이 달라서, 자사의 제품끼리만 통신이 가능하여, 이기종간 통신문제 발생
- ISO에서 네트워크 통신 표준 모델을 정의하여, 1984에 발표
- 네트워크에 문제가 발생했을 때 문제해결을 도울 수 있다.
- 총 7개의 단계로 이루어진 7계층 구조

```
[               하위계층 (1~4)            ]   [     상위 계층 (5~7)     ]
물리계층 -> 데이터링크계층 -> 네트워크계층 -> 전송계층 -> 세션계층 -> 표현계층 -> 응용계층

인터넷이 갑자기 안됨

-> 랜선이 잘 꼽혀있는지 확인한다. (물리계층 확인)
-> 잘꽂혀 있으면, 터미널이나 cmd로 ping을 찍어본다. (네트워크 계층 확인)
-> 이런식으로 네트워크 각 계층별로 디버깅을 해보면 문제영역을 파악할 수 있다.
```

---

### 물리계층

- OSI 7 Layer의 1계층인 물리계층 (Physical Layer)
- 주로 전기적 및 기계적인 특성으로 통신 케이블로 데이터를 전송하는 기능
- 사용적인 단위로 bit(0, 1)이며, 전기적으로는 On, Off를 나타낸다.
- 케이블, 리피터, 허브등..

---

### 데이터링크계층

- OSI 7 Layer의 2계층인 데이터링크계층 (Data Link Layer)
- 물리계층을 통하여 송,수신되는 정보의 흐름과 오류를 관리한다.
- 맥주소를 가지고 통신이 가능한 계층
- 사용되는 단위는 프레임 (bit의 모음)
- 브릿지, L2 스위치

(1,2계층만으로도 네트워크가 가능하다 : 컴퓨터 2대를 크로스 케이블로 직접연결하면 가능)<br>

---

### 네트워크계층

- OSI 7 Layer의 3계층인 네트워크계층 (Network Layer)
- 가장 중요한 목적은 데이터를 목적지까지 가장 안전하고 빠르게 전달하는 것 -> 라우팅
- 경로배정을 하고 경로에 따라 데이터를 전달하는 것이 하는 일
- 랜상 상호 네트워크 가능
- 사용되는 단위는 패킷
- 라우터, L3스위치

---

### 전송계층

- OSI 7 Layer의 4계층인 전송계층 (Transport Layer)
- 정보를 분할하고, 다시 합치는 과정을 담당한다.
- 통신 과정에 있어 오류제어와 흐름제어를 한다.
- 사용되는 단위는 세그먼테이션
- TCP, UDP

TCP는 주소(포트)가 있다.<br>
포트가 4계층에 해당되며, 응용프로그램을 사용하기 위한 번호이다.<br>
http, ftp, telnet을 사용하기 위해서는 포트를 쓴다. (가령 8080같은..)<br>

---

### 세션계층

- OSI 7 Layer의 5계층인 세션계층 (Session Layer)
- 통신사이의 연결이 끊이지 않게 세션을 열어 관리하는 역할

---

### 표현계층

- OSI 7 Layer의 6계층인 표현계층 (Presentation Layer)
- 다양한 데이터의 포맷을 일정한 포맷으로 변환하고, 압축과 암/복호화 작업을 수행하는 역할

---

### 응용계층

- OSI 7 Layer의 7계층인 응용계층 (Application Layer)
- 응용프로그램과 사용자사이의 인터페이스를 제공하는 역할
- IE, 크롬등 브라우저를 응용프로그램을 사용하는 것을 7계층으로 보면 된다.

---

### OSI 7 Layer 각 계층별 사용 프로토콜

| 계층           | 프로토콜                |
| -------------- | ----------------------- |
| 물리계층       | UTP cables, RS-232C     |
| 데이터링크계층 | Ethernet, MAC, LLC      |
| 네트워크계층   | IP, IPX, ARP, RARP      |
| 전송계층       | TCP, UDP                |
| 세션계층       | SQL, SAP, SDP           |
| 표현계층       | MPEG, MIDI, ASCII, JPEG |
| 응용계층       | HTTP, FTP, TELNET, SMTP |

---

### OSI 7 Layer 각 계층별 송/수신 과정

각 계층을 지나면서 캡슐화와 디캡슐화가 이루어지며, 송/수신이 이루어진다.

- 각 계층을 지날때마다, 원본데이터에 헤더가 붙으면서 캡슐화가 되면서 내려간다.
- 수신측에서 송신측에서 보낸것을 받게되면 디 캡슐화가 일어난다.

```
송신측 : 7->6->5->4->3->2->1
[            전송          ]
수신측 : 1->2->3->4->5->6->7
```
